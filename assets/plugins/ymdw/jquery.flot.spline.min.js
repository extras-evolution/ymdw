(function(e){"use strict";function t(e,t,n,r,i,s,o){var u=Math.pow,a=Math.sqrt,f,l,c,h,p,d,v,m;f=a(u(n-e,2)+u(r-t,2));l=a(u(i-n,2)+u(s-r,2));c=o*f/(f+l);h=o-c;p=n+c*(e-i);d=r+c*(t-s);v=n-h*(e-i);m=r-h*(t-s);return[p,d,v,m]}function n(e,t,n,r){if(t===void 0||t!=="bezier"&&t!=="quadratic"){t="quadratic"}t=t+"CurveTo";e.beginPath();e.moveTo(n[0],n[1]);e[t].apply(e,r.concat(n.slice(2)));e.stroke();e.closePath()}function r(r,i,s){if(s.splines.show!==true){return}var o=[],u=s.splines.tension||.5,a,f,l,c=s.datapoints.points,h=s.datapoints.pointsize,p=r.getPlotOffset(),d=c.length,v=[];if(d/h<4){e.extend(s.lines,s.splines);return}for(a=0;a<d;a+=h){f=c[a];l=c[a+1];if(f==null||f<s.xaxis.min||f>s.xaxis.max||l<s.yaxis.min||l>s.yaxis.max){continue}v.push(s.xaxis.p2c(f),s.yaxis.p2c(l))}d=v.length;for(a=0;a<d-4;a+=2){o=o.concat(t.apply(this,v.slice(a,a+6).concat([u])))}i.save();i.translate(p.left,p.top);i.strokeStyle=s.color;i.lineWidth=s.splines.lineWidth;for(a=2;a<d-5;a+=2){n(i,"bezier",v.slice(a,a+4),o.slice(2*a-2,2*a+2))}n(i,"quadratic",v.slice(0,4),o.slice(0,2));n(i,"quadratic",v.slice(d-2,d),[o[2*d-10],o[2*d-9],v[d-4],v[d-3]]);i.restore()}e.plot.plugins.push({init:function(e){e.hooks.drawSeries.push(r)},options:{series:{splines:{show:false,lineWidth:2,tension:.5}}},name:"spline",version:"0.8.1"})})(jQuery)